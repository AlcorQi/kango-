<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Linux系统异常监控</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link href="./assets/styles.css" rel="stylesheet"/>
</head>
<body>
<header>
  <div class="title">🖥️ Linux系统异常监控 - Dashboard</div>
  <div class="actions">
    <a class="btn ghost" href="./history.html">历史查询</a>
    <a class="btn ghost" href="./settings.html">配置管理</a>
    <button id="btn-refresh" class="btn primary">刷新</button>
  </div>
</header>
<div class="container">
  <div id="toast" style="display:none"></div>
  <div class="grid">
    <div class="card">
      <h3>异常总数</h3>
      <div id="metric-total" class="metric">-</div>
    </div>
    <div class="card">
      <h3>严重异常</h3>
      <div id="metric-critical" class="metric">-</div>
    </div>
    <div class="card">
      <h3>检测状态</h3>
      <div class="status"><span class="dot ok"></span><span id="metric-status">运行中</span></div>
      <div style="margin-top:8px;color:#a7b1c9">最后检测时间：<span id="metric-last">-</span></div>
    </div>
  </div>

  <div class="row" style="margin-top:16px">
    <div class="card" style="flex:1">
      <div class="toolbar"><div style="font-weight:600;color:#a7b1c9">最新异常事件</div></div>
      <table class="table">
        <thead>
          <tr>
            <th>时间</th>
            <th>级别</th>
            <th>类型</th>
            <th>信息</th>
            <th>来源</th>
          </tr>
        </thead>
        <tbody id="latest-body"></tbody>
      </table>
    </div>
  </div>

  <div class="row" style="margin-top:12px">
    <div class="card" style="flex:1">
      <div class="toolbar"><div style="font-weight:600;color:#a7b1c9">异常类型分布</div></div>
      <div class="chart-wrap"><canvas id="typeChart"></canvas></div>
    </div>
  </div>

  <div class="row" style="margin-top:16px">
    <div class="card" style="flex:1">
      <div class="toolbar"><div style="font-weight:600;color:#a7b1c9">AI 建议</div></div>
      <div id="ai-list"></div>
    </div>
  </div>

  <div class="footer">© 系统异常检测</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script type="module" src="./assets/dashboard.js"></script>
</body>
</html>
